{"version":3,"names":["HighlightedSquareComponent","React","forwardRef","ref","style","colors","lastMoveHighlight","useChessboardProps","backgroundColor","useSharedValue","isHighlighted","useImperativeHandle","reset","value","highlight","bg","rHighlightedSquareStyle","useAnimatedStyle","opacity","withTiming","styles","highlightedSquare","StyleSheet","create","position","aspectRatio","HighlightedSquare","memo"],"sources":["highlighted-square.tsx"],"sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport { StyleProp, StyleSheet, ViewStyle } from 'react-native';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withTiming,\n} from 'react-native-reanimated';\nimport { useChessboardProps } from '../../context/props-context/hooks';\n\ntype HighlightedSquareProps = {\n  style?: StyleProp<ViewStyle>;\n};\n\nexport type HighlightedSquareRefType = {\n  isHighlighted: () => boolean;\n  reset: () => void;\n  highlight: (_?: { backgroundColor?: string }) => void;\n};\n\nconst HighlightedSquareComponent = React.forwardRef<\n  HighlightedSquareRefType,\n  HighlightedSquareProps\n>(({ style }, ref) => {\n  const {\n    colors: { lastMoveHighlight },\n  } = useChessboardProps();\n  const backgroundColor = useSharedValue(lastMoveHighlight);\n  const isHighlighted = useSharedValue(false);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      reset: () => {\n        isHighlighted.value = false;\n      },\n      highlight: ({ backgroundColor: bg } = {}) => {\n        backgroundColor.value = bg ?? lastMoveHighlight;\n        isHighlighted.value = true;\n      },\n      isHighlighted: () => isHighlighted.value,\n    }),\n    [backgroundColor, isHighlighted, lastMoveHighlight]\n  );\n\n  const rHighlightedSquareStyle = useAnimatedStyle(() => {\n    return {\n      opacity: withTiming(isHighlighted.value ? 1 : 0),\n      backgroundColor: backgroundColor.value,\n    };\n  }, []);\n\n  return (\n    <Animated.View\n      style={[styles.highlightedSquare, style, rHighlightedSquareStyle]}\n    />\n  );\n});\n\nconst styles = StyleSheet.create({\n  highlightedSquare: {\n    position: 'absolute',\n    aspectRatio: 1,\n  },\n});\n\nconst HighlightedSquare = React.memo(HighlightedSquareComponent);\n\nexport { HighlightedSquare };\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAKA;;;;;;AAYA,MAAMA,0BAA0B,gBAAGC,cAAA,CAAMC,UAAN,CAGjC,OAAYC,GAAZ,KAAoB;EAAA,IAAnB;IAAEC;EAAF,CAAmB;EACpB,MAAM;IACJC,MAAM,EAAE;MAAEC;IAAF;EADJ,IAEF,IAAAC,yBAAA,GAFJ;EAGA,MAAMC,eAAe,GAAG,IAAAC,qCAAA,EAAeH,iBAAf,CAAxB;EACA,MAAMI,aAAa,GAAG,IAAAD,qCAAA,EAAe,KAAf,CAAtB;EAEA,IAAAE,0BAAA,EACER,GADF,EAEE,OAAO;IACLS,KAAK,EAAE,MAAM;MACXF,aAAa,CAACG,KAAd,GAAsB,KAAtB;IACD,CAHI;IAILC,SAAS,EAAE,YAAkC;MAAA,IAAjC;QAAEN,eAAe,EAAEO;MAAnB,CAAiC,uEAAP,EAAO;MAC3CP,eAAe,CAACK,KAAhB,GAAwBE,EAAxB,aAAwBA,EAAxB,cAAwBA,EAAxB,GAA8BT,iBAA9B;MACAI,aAAa,CAACG,KAAd,GAAsB,IAAtB;IACD,CAPI;IAQLH,aAAa,EAAE,MAAMA,aAAa,CAACG;EAR9B,CAAP,CAFF,EAYE,CAACL,eAAD,EAAkBE,aAAlB,EAAiCJ,iBAAjC,CAZF;EAeA,MAAMU,uBAAuB,GAAG,IAAAC,uCAAA,EAAiB,MAAM;IACrD,OAAO;MACLC,OAAO,EAAE,IAAAC,iCAAA,EAAWT,aAAa,CAACG,KAAd,GAAsB,CAAtB,GAA0B,CAArC,CADJ;MAELL,eAAe,EAAEA,eAAe,CAACK;IAF5B,CAAP;EAID,CAL+B,EAK7B,EAL6B,CAAhC;EAOA,oBACE,6BAAC,8BAAD,CAAU,IAAV;IACE,KAAK,EAAE,CAACO,MAAM,CAACC,iBAAR,EAA2BjB,KAA3B,EAAkCY,uBAAlC;EADT,EADF;AAKD,CArCkC,CAAnC;;AAuCA,MAAMI,MAAM,GAAGE,uBAAA,CAAWC,MAAX,CAAkB;EAC/BF,iBAAiB,EAAE;IACjBG,QAAQ,EAAE,UADO;IAEjBC,WAAW,EAAE;EAFI;AADY,CAAlB,CAAf;;AAOA,MAAMC,iBAAiB,gBAAGzB,cAAA,CAAM0B,IAAN,CAAW3B,0BAAX,CAA1B"}