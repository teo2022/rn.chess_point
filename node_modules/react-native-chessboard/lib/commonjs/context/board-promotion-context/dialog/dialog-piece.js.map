{"version":3,"names":["DialogPiece","React","memo","index","width","type","piece","onSelectPiece","isTapActive","useSharedValue","colors","promotionPieceButton","useChessboardProps","gesture","Gesture","Tap","onBegin","value","onTouchesUp","runOnJS","onFinalize","shouldCancelWhenOutside","maxDuration","rStyle","useAnimatedStyle","opacity","withTiming","duration","position","backgroundColor","aspectRatio","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderLeftWidth","borderTopWidth","styles","pieceContainer","StyleSheet","create","justifyContent","alignItems","borderBottomWidth","borderColor"],"sources":["dialog-piece.tsx"],"sourcesContent":["import type { PieceType } from 'chess.js';\nimport React from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport Animated, {\n  runOnJS,\n  useAnimatedStyle,\n  useSharedValue,\n  withTiming,\n} from 'react-native-reanimated';\nimport type { Player } from '../../../types';\nimport { ChessPiece } from '../../../components/piece/visual-piece';\nimport { useChessboardProps } from '../../../context/props-context/hooks';\n\ntype DialogPieceProps = {\n  index: number;\n  width: number;\n  type: Player;\n  piece: PieceType;\n  onSelectPiece?: (piece: PieceType) => void;\n};\n\nconst DialogPiece: React.FC<DialogPieceProps> = React.memo(\n  ({ index, width, type, piece, onSelectPiece }) => {\n    const isTapActive = useSharedValue(false);\n    const {\n      colors: { promotionPieceButton },\n    } = useChessboardProps();\n\n    const gesture = Gesture.Tap()\n      .onBegin(() => {\n        isTapActive.value = true;\n      })\n      .onTouchesUp(() => {\n        if (onSelectPiece) runOnJS(onSelectPiece)(piece);\n      })\n      .onFinalize(() => {\n        isTapActive.value = false;\n      })\n      .shouldCancelWhenOutside(true)\n      .maxDuration(10000);\n\n    const rStyle = useAnimatedStyle(() => {\n      return {\n        opacity: withTiming(isTapActive.value ? 1 : 0, { duration: 150 }),\n      };\n    }, []);\n\n    return (\n      <GestureDetector gesture={gesture}>\n        <Animated.View>\n          <Animated.View\n            style={[\n              {\n                width,\n                position: 'absolute',\n                backgroundColor: promotionPieceButton,\n                aspectRatio: 1,\n                borderTopLeftRadius: index === 0 ? 5 : 0,\n                borderBottomLeftRadius: index === 1 ? 5 : 0,\n                borderTopRightRadius: index === 2 ? 5 : 0,\n                borderBottomRightRadius: index === 3 ? 5 : 0,\n              } as const,\n              rStyle,\n            ]}\n          />\n          <View\n            style={[\n              {\n                width,\n                borderLeftWidth: index === 3 || index === 2 ? 1 : 0,\n                borderTopWidth: index % 2 !== 0 ? 1 : 0,\n              } as const,\n              styles.pieceContainer,\n            ]}\n          >\n            <ChessPiece id={`${type}${piece}`} />\n          </View>\n        </Animated.View>\n      </GestureDetector>\n    );\n  }\n);\n\nconst styles = StyleSheet.create({\n  pieceContainer: {\n    aspectRatio: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderBottomWidth: 0,\n    borderColor: 'rgba(0,0,0,0.2)',\n  },\n});\n\nexport { DialogPiece };\n"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;AAOA;;AACA;;;;;;;;AAUA,MAAMA,WAAuC,gBAAGC,cAAA,CAAMC,IAAN,CAC9C,QAAkD;EAAA,IAAjD;IAAEC,KAAF;IAASC,KAAT;IAAgBC,IAAhB;IAAsBC,KAAtB;IAA6BC;EAA7B,CAAiD;EAChD,MAAMC,WAAW,GAAG,IAAAC,qCAAA,EAAe,KAAf,CAApB;EACA,MAAM;IACJC,MAAM,EAAE;MAAEC;IAAF;EADJ,IAEF,IAAAC,yBAAA,GAFJ;;EAIA,MAAMC,OAAO,GAAGC,kCAAA,CAAQC,GAAR,GACbC,OADa,CACL,MAAM;IACbR,WAAW,CAACS,KAAZ,GAAoB,IAApB;EACD,CAHa,EAIbC,WAJa,CAID,MAAM;IACjB,IAAIX,aAAJ,EAAmB,IAAAY,8BAAA,EAAQZ,aAAR,EAAuBD,KAAvB;EACpB,CANa,EAObc,UAPa,CAOF,MAAM;IAChBZ,WAAW,CAACS,KAAZ,GAAoB,KAApB;EACD,CATa,EAUbI,uBAVa,CAUW,IAVX,EAWbC,WAXa,CAWD,KAXC,CAAhB;;EAaA,MAAMC,MAAM,GAAG,IAAAC,uCAAA,EAAiB,MAAM;IACpC,OAAO;MACLC,OAAO,EAAE,IAAAC,iCAAA,EAAWlB,WAAW,CAACS,KAAZ,GAAoB,CAApB,GAAwB,CAAnC,EAAsC;QAAEU,QAAQ,EAAE;MAAZ,CAAtC;IADJ,CAAP;EAGD,CAJc,EAIZ,EAJY,CAAf;EAMA,oBACE,6BAAC,0CAAD;IAAiB,OAAO,EAAEd;EAA1B,gBACE,6BAAC,8BAAD,CAAU,IAAV,qBACE,6BAAC,8BAAD,CAAU,IAAV;IACE,KAAK,EAAE,CACL;MACET,KADF;MAEEwB,QAAQ,EAAE,UAFZ;MAGEC,eAAe,EAAElB,oBAHnB;MAIEmB,WAAW,EAAE,CAJf;MAKEC,mBAAmB,EAAE5B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CALzC;MAME6B,sBAAsB,EAAE7B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAN5C;MAOE8B,oBAAoB,EAAE9B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAP1C;MAQE+B,uBAAuB,EAAE/B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB;IAR7C,CADK,EAWLoB,MAXK;EADT,EADF,eAgBE,6BAAC,iBAAD;IACE,KAAK,EAAE,CACL;MACEnB,KADF;MAEE+B,eAAe,EAAEhC,KAAK,KAAK,CAAV,IAAeA,KAAK,KAAK,CAAzB,GAA6B,CAA7B,GAAiC,CAFpD;MAGEiC,cAAc,EAAEjC,KAAK,GAAG,CAAR,KAAc,CAAd,GAAkB,CAAlB,GAAsB;IAHxC,CADK,EAMLkC,MAAM,CAACC,cANF;EADT,gBAUE,6BAAC,uBAAD;IAAY,EAAE,EAAG,GAAEjC,IAAK,GAAEC,KAAM;EAAhC,EAVF,CAhBF,CADF,CADF;AAiCD,CA3D6C,CAAhD;;;;AA8DA,MAAM+B,MAAM,GAAGE,uBAAA,CAAWC,MAAX,CAAkB;EAC/BF,cAAc,EAAE;IACdR,WAAW,EAAE,CADC;IAEdW,cAAc,EAAE,QAFF;IAGdC,UAAU,EAAE,QAHE;IAIdC,iBAAiB,EAAE,CAJL;IAKdC,WAAW,EAAE;EALC;AADe,CAAlB,CAAf"}