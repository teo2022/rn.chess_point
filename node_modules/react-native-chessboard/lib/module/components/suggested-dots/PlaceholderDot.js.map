{"version":3,"names":["React","useMemo","StyleSheet","View","Animated","runOnJS","useAnimatedStyle","useDerivedValue","withTiming","useChessboardProps","useReversePiecePosition","PlaceholderDot","memo","x","y","selectableSquares","moveTo","pieceSize","toPosition","toTranslation","currentSquare","translation","isSelectable","value","map","square","includes","filter","v","length","rPlaceholderStyle","canBeSelected","opacity","styles","placeholderContainer","width","padding","transform","translateX","translateY","borderRadius","placeholder","create","position","aspectRatio","backgroundColor","flex"],"sources":["PlaceholderDot.tsx"],"sourcesContent":["import type { Square } from 'chess.js';\nimport React, { useMemo } from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport Animated, {\n  runOnJS,\n  useAnimatedStyle,\n  useDerivedValue,\n  withTiming,\n} from 'react-native-reanimated';\nimport { useChessboardProps } from '../../context/props-context/hooks';\n\nimport { useReversePiecePosition } from '../../notation';\n\ntype PlaceholderDotProps = {\n  x: number;\n  y: number;\n  selectableSquares: Animated.SharedValue<Square[]>;\n  moveTo?: (to: Square) => void;\n};\n\nconst PlaceholderDot: React.FC<PlaceholderDotProps> = React.memo(\n  ({ x, y, selectableSquares, moveTo }) => {\n    const { pieceSize } = useChessboardProps();\n    const { toPosition, toTranslation } = useReversePiecePosition();\n\n    const currentSquare = toPosition({ x: x * pieceSize, y: y * pieceSize });\n    const translation = useMemo(\n      () => toTranslation(currentSquare),\n      [currentSquare, toTranslation]\n    );\n\n    const isSelectable = useDerivedValue(() => {\n      'worklet';\n      return (\n        selectableSquares.value\n          .map((square) => square.includes(currentSquare))\n          .filter((v) => v).length > 0\n      );\n    }, [currentSquare, selectableSquares.value]);\n\n    const rPlaceholderStyle = useAnimatedStyle(() => {\n      const canBeSelected = isSelectable.value;\n      return { opacity: withTiming(canBeSelected ? 0.15 : 0) };\n    }, []);\n\n    return (\n      <View\n        onTouchEnd={() => {\n          if (isSelectable.value && moveTo) {\n            runOnJS(moveTo)(currentSquare);\n          }\n        }}\n        style={[\n          styles.placeholderContainer,\n          {\n            width: pieceSize,\n            padding: pieceSize / 3.2,\n            transform: [\n              { translateX: translation.x },\n              { translateY: translation.y },\n            ],\n          },\n        ]}\n      >\n        <Animated.View\n          style={[\n            { borderRadius: pieceSize },\n            styles.placeholder,\n            rPlaceholderStyle,\n          ]}\n        />\n      </View>\n    );\n  }\n);\n\nconst styles = StyleSheet.create({\n  placeholderContainer: {\n    position: 'absolute',\n    aspectRatio: 1,\n    backgroundColor: 'transparent',\n  },\n  placeholder: {\n    flex: 1,\n    backgroundColor: 'black',\n    opacity: 0.2,\n  },\n});\n\nexport { PlaceholderDot };\n"],"mappings":"AACA,OAAOA,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,cAAjC;AACA,OAAOC,QAAP,IACEC,OADF,EAEEC,gBAFF,EAGEC,eAHF,EAIEC,UAJF,QAKO,yBALP;AAMA,SAASC,kBAAT,QAAmC,mCAAnC;AAEA,SAASC,uBAAT,QAAwC,gBAAxC;AASA,MAAMC,cAA6C,gBAAGX,KAAK,CAACY,IAAN,CACpD,QAAyC;EAAA,IAAxC;IAAEC,CAAF;IAAKC,CAAL;IAAQC,iBAAR;IAA2BC;EAA3B,CAAwC;EACvC,MAAM;IAAEC;EAAF,IAAgBR,kBAAkB,EAAxC;EACA,MAAM;IAAES,UAAF;IAAcC;EAAd,IAAgCT,uBAAuB,EAA7D;EAEA,MAAMU,aAAa,GAAGF,UAAU,CAAC;IAAEL,CAAC,EAAEA,CAAC,GAAGI,SAAT;IAAoBH,CAAC,EAAEA,CAAC,GAAGG;EAA3B,CAAD,CAAhC;EACA,MAAMI,WAAW,GAAGpB,OAAO,CACzB,MAAMkB,aAAa,CAACC,aAAD,CADM,EAEzB,CAACA,aAAD,EAAgBD,aAAhB,CAFyB,CAA3B;EAKA,MAAMG,YAAY,GAAGf,eAAe,CAAC,MAAM;IACzC;;IACA,OACEQ,iBAAiB,CAACQ,KAAlB,CACGC,GADH,CACQC,MAAD,IAAYA,MAAM,CAACC,QAAP,CAAgBN,aAAhB,CADnB,EAEGO,MAFH,CAEWC,CAAD,IAAOA,CAFjB,EAEoBC,MAFpB,GAE6B,CAH/B;EAKD,CAPmC,EAOjC,CAACT,aAAD,EAAgBL,iBAAiB,CAACQ,KAAlC,CAPiC,CAApC;EASA,MAAMO,iBAAiB,GAAGxB,gBAAgB,CAAC,MAAM;IAC/C,MAAMyB,aAAa,GAAGT,YAAY,CAACC,KAAnC;IACA,OAAO;MAAES,OAAO,EAAExB,UAAU,CAACuB,aAAa,GAAG,IAAH,GAAU,CAAxB;IAArB,CAAP;EACD,CAHyC,EAGvC,EAHuC,CAA1C;EAKA,oBACE,oBAAC,IAAD;IACE,UAAU,EAAE,MAAM;MAChB,IAAIT,YAAY,CAACC,KAAb,IAAsBP,MAA1B,EAAkC;QAChCX,OAAO,CAACW,MAAD,CAAP,CAAgBI,aAAhB;MACD;IACF,CALH;IAME,KAAK,EAAE,CACLa,MAAM,CAACC,oBADF,EAEL;MACEC,KAAK,EAAElB,SADT;MAEEmB,OAAO,EAAEnB,SAAS,GAAG,GAFvB;MAGEoB,SAAS,EAAE,CACT;QAAEC,UAAU,EAAEjB,WAAW,CAACR;MAA1B,CADS,EAET;QAAE0B,UAAU,EAAElB,WAAW,CAACP;MAA1B,CAFS;IAHb,CAFK;EANT,gBAkBE,oBAAC,QAAD,CAAU,IAAV;IACE,KAAK,EAAE,CACL;MAAE0B,YAAY,EAAEvB;IAAhB,CADK,EAELgB,MAAM,CAACQ,WAFF,EAGLX,iBAHK;EADT,EAlBF,CADF;AA4BD,CArDmD,CAAtD;AAwDA,MAAMG,MAAM,GAAG/B,UAAU,CAACwC,MAAX,CAAkB;EAC/BR,oBAAoB,EAAE;IACpBS,QAAQ,EAAE,UADU;IAEpBC,WAAW,EAAE,CAFO;IAGpBC,eAAe,EAAE;EAHG,CADS;EAM/BJ,WAAW,EAAE;IACXK,IAAI,EAAE,CADK;IAEXD,eAAe,EAAE,OAFN;IAGXb,OAAO,EAAE;EAHE;AANkB,CAAlB,CAAf;AAaA,SAASrB,cAAT"}